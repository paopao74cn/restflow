
imports:

  - classpath:/common/java/actors.yaml
  - classpath:/common/directors.yaml
  - classpath:/workflows/NestedWorkflow/NestedWorkflow.yaml

components:

- id: WA
  type: Workflow
  properties:
    director: !ref PublishSubscribeDirector
    nodes:
      - !ref NB
      
- id: NB
  type: Node
  properties: 
    actor: !ref WC
    sequences:
      iteration: 
        - 1
        - 2
        - 3
    nestedUriPrefix: /foo/{iteration}/

- id: WC
  type: Workflow
  properties:
    director: !ref PublishSubscribeDirector
    nodes:
      - !ref ND

- id: ND
  type: GroovyActorNode
  properties:
    actor.step: |
      output = input;
      println output;
    sequences:
      input:
        - ND_1
        - ND_2
        - ND_3
    outflows:
      output: /output
    